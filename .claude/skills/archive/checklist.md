# アーカイブ時のドキュメント更新チェックリスト

各ドキュメントについて「更新条件」に該当する場合のみ更新する。該当しない場合はスキップ。

## ドキュメント記述ルール

IMPORTANT: すべてのドキュメント更新時に以下を徹底する。これらのファイルは他のセッションで毎回読み込まれるため、冗長な記述はトークンの浪費に直結する。

### 書くもの
- コードを読むだけでは分からない設計判断・ビジネスルール
- 既存パターンと異なる例外的なルール
- エンティティ間の関係性や状態遷移など構造的な情報

### 書かないもの
- コードを読めば分かること（メソッド名、引数の型など）
- 標準的なフレームワーク規約の再説明
- 実装の詳細手順やチュートリアル的な記述
- 同じ情報の重複記載（1箇所に集約し、他からはリンク）

### 記述スタイル
- 箇条書き・表を優先。散文の説明は最小限にする
- 「何を・なぜ」を書く。「どうやって」はコードに任せる
- 長い説明が必要な場合は別ファイルに切り出してリンクする
- 削除の判断基準: 「これを消したらClaudeが間違いを犯すか？」→ No なら消す

## 必ず更新するドキュメント

### docs/archive/README.md
- **更新内容**: 「アーカイブ済み案件」セクションにエントリを追加
- **形式**: 既存エントリに倣う（CHG番号、実装完了日、内容、主要ドキュメント反映先）

## 条件付きで更新するドキュメント

### docs/SPEC.md
- **更新条件**: アーキテクチャに影響する変更（新レイヤー追加、通信方式変更、DB構成変更など）
- **更新内容**: 「アーキテクチャ変更履歴」セクションにエントリを追加
- **スキップ例**: UI改善、バリデーション追加、エラーメッセージ改善など

### docs/requirements.md
- **更新条件**: ビジネスルールの追加・変更がある場合
- **更新内容**: 該当するビジネスルールセクションに反映
- **スキップ例**: 技術的な改善のみの場合

### docs/data-model.md
- **更新条件**: エンティティの追加・変更、DB スキーマの変更がある場合
- **更新内容**: 該当エンティティの定義を更新
- **スキップ例**: フロントエンドのみの変更

### docs/ui/api-spec.md
- **更新条件**: APIエンドポイントの追加・変更がある場合
- **更新内容**: 該当エンドポイントの仕様を追加・更新
- **スキップ例**: バックエンド内部のロジック変更のみ

### docs/ui/customer-ui.md
- **更新条件**: 顧客画面の機能・UIに変更がある場合
- **更新内容**: 該当画面の仕様を更新
- **スキップ例**: 管理画面のみの変更、バックエンドのみの変更

### docs/ui/admin-ui.md
- **更新条件**: 管理画面の機能・UIに変更がある場合
- **更新内容**: 該当画面の仕様を更新
- **スキップ例**: 顧客画面のみの変更、バックエンドのみの変更

### docs/design-system.md
- **更新条件**: デザインシステム（カラー、タイポグラフィ、コンポーネント規約）に変更がある場合
- **更新内容**: 該当セクションを更新
- **スキップ例**: 既存デザインシステムに沿った実装

### docs/specs/ 配下
- **更新条件**: 該当ドメインの仕様に変更がある場合
- **対象ファイルの判定**:
  - 在庫関連 → `specs/inventory.md`
  - 注文関連 → `specs/order.md`
  - 認証関連 → `specs/authentication.md`
  - 商品関連 → `specs/product.md`
  - BFF関連 → `specs/bff-architecture.md`

### docs/spec-implementation-gaps.md
- **更新条件**: ギャップ一覧に記載されている項目が解消された場合
- **更新内容**: 該当項目のステータスを「実装完了」に更新
- **スキップ例**: ギャップ一覧に関連する項目がない場合
