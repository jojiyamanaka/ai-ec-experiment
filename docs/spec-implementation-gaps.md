# 仕様と実装のギャップ一覧

## 完了済みサマリー

| ID | 優先度 | 内容 | ステータス |
|----|--------|------|-----------|
| H-1 | 高 | 商品詳細取得時の公開状態チェック | 実装完了 |
| H-2 | 高 | 在庫引当処理（仮引当・本引当の2段階方式） | 実装完了 |
| H-3 | 高 | 注文状態遷移機能 | 実装完了 |
| M-1 | 中 | 配送料・手数料が常に¥0 | 仕様明記済み |
| M-2 | 中 | 在庫不足時の詳細エラーレスポンス | 要件化済み（CHG-001） |
| M-3 | 中 | 非公開商品がカートに残る問題 | 実装完了（CHG-002） |
| M-4 | 中 | 注文キャンセル機能 | 実装完了 |
| M-5 | 中 | カート内商品の数量上限 | 実装完了（上限9個） |
| M-6 | 中 | エラーコード一覧の整備 | 実装完了 |
| L-1 | 低 | 商品一覧のページネーション機能 | 実装完了（CHG-011） |
| L-2 | 低 | おすすめ商品の選定ロジック | 仕様明記済み（先頭3件） |
| L-3 | 低 | セッションIDの有効期限 | 仕様明記済み（期限なし） |
| L-4 | 低 | 注文番号の上限（999件/日） | 仕様明記済み |
| L-5 | 低 | 商品画像がプレースホルダーのみ | 仕様明記済み |
| L-6 | 低 | 管理画面のアクセス制限 | 実装完了（CHG-006） |

---

## 未対応（Phase 2以降で検討）

### L-7. 価格計算のオーバーフロー対策なし

**実装**: `Cart.java` で `int` 型を使用
**問題**: 高額商品 x 大量数量でオーバーフロー発生の可能性（例: 100万円 x 2,200個 = 22億円）
**影響**: 通常運用では問題ないが、極端なケースで不具合の可能性
**対応案**: `Long` 型への変更、またはカート数量上限（現在9個）で実質的に回避済み

**参照**: `docs/specs/product.md`（価格管理）
