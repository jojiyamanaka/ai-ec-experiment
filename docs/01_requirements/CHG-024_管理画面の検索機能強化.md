
# CHG-024: 管理画面の検索画面強化

作成日: 2026-02-22
CHG番号: CHG-024
ステータス: 起票済み
優先度: 高

> **方針**: このドキュメントには Why（なぜ） と What（何を） のみを書く。
> 技術的な How（クラス設計・SQL・アーキテクチャ選択）は設計書（`02_designs/`）に委ねる。

---

## 1. 背景

現状の管理画面（商品管理・注文管理）は、基本的な一覧表示と単一ステータスフィルタのみを提供している。

そのため、以下の課題がある。

- 在庫不足商品や販売期間外商品を即座に抽出できない
- 引当未完了の注文を一覧で特定できない
- 会員メールや注文金額などの業務条件で検索できない
- 注文数・商品数が増加した場合、一覧からの目視確認が困難になる

在庫引当区分（REAL / FRAME）や引当進捗（committedQuantity）など、
業務的に重要な情報が増えているにも関わらず、それを活用する検索UIが存在しない。

業務効率向上および将来のデータ増加に備え、
管理画面に複合条件検索・高度フィルタリング機能を導入する。

---

## 2. 要件

### 2-1. 商品管理画面の高度検索

商品管理画面（`/bo/item`）に以下の検索・フィルタ機能を追加する。

- 商品名・品番による部分一致検索
- カテゴリ絞り込み
- 公開状態（公開 / 非公開）
- 販売期間内 / 販売期間外
- 引当区分（REAL / FRAME）
- 在庫閾値以下の商品抽出（閾値指定可能）
- 在庫ゼロ商品のみ抽出

複数条件を同時に指定できること。

---

### 2-2. 注文管理画面の高度検索

注文管理画面（`/bo/order`）に以下の検索機能を追加する。

- 注文番号検索（完全一致 / 部分一致）
- 会員メール検索
- ステータス複数選択フィルタ
- 注文日付範囲指定
- 合計金額範囲指定
- 引当進捗による抽出（例: 100%未満のみ）
- 出荷未指示注文のみ抽出

複数条件を組み合わせて検索できること。

---

### 2-3. 検索条件の保持

- 検索条件はURLクエリパラメータと同期する
- URLを直接開いた場合も同一検索条件が再現される
- ブラウザ戻る操作で検索状態が維持される

---

### 2-4. UX要件（管理画面共通）

- フィルタ変更時に一覧が更新される
- 検索実行中はローディング表示を行う
- 検索条件を一括クリアできるUIを提供する
- 検索結果が0件の場合は「該当データなし」と明示する

---

## 3. 受け入れ条件

- [ ] 商品管理画面で「在庫0の商品」のみを表示できる
- [ ] 商品管理画面で引当区分REALのみを抽出できる
- [ ] 注文管理画面で「引当進捗100%未満」の注文のみを表示できる
- [ ] 注文管理画面で会員メールを指定して検索できる
- [ ] 複数条件を組み合わせた検索が可能である
- [ ] URLに含まれる検索条件を再現できる
- [ ] 検索未指定時は従来の一覧表示と同一結果となる

---

## 4. スコープ外

- 検索エンジンの導入
- CSVエクスポート機能
- 管理画面のUI全面リデザイン
- 顧客向け検索機能の変更

---

## 5. 仕様への反映

- `docs/ui/bo-ui.md` — 商品管理・注文管理の検索仕様追記
- `docs/api/backoffice-bff-openapi.json` — 検索クエリパラメータ追加
- `docs/specs/order.md` — 引当進捗検索の明示
- `docs/specs/product.md` — 在庫条件検索の明示

---

## 6. 関連資料

