# 顧客向け画面のUI仕様

**目的**: AIを活用したECサイトの顧客向け画面（TOP、商品一覧、商品詳細、カート、注文）のUI/UX仕様を定義する
**スコープ**: 画面構成、UI要素、画面遷移、UI/UX設計思想

**関連ドキュメント**:
- [技術仕様](../SPEC.md) - 技術方針・アーキテクチャ
- [業務要件](../requirements.md) - ビジネスルール
- [データモデル](../data-model.md) - エンティティ定義
- [API仕様](./api-spec.md) - APIエンドポイント

---

## 画面一覧

| 画面名 | パス | 目的 |
|-------|------|------|
| TOP画面 | `/` | サイトのトップページ、おすすめ商品の表示 |
| 商品一覧画面 | `/item` | 全商品の一覧表示 |
| 商品詳細画面 | `/item/:id` | 個別商品の詳細情報表示とカート追加 |
| カート画面 | `/order/cart` | カート内容の確認と編集 |
| 注文確認画面 | `/order/reg` | 注文内容の最終確認 |
| 注文完了画面 | `/order/complete` | 注文完了の通知 |
| 注文詳細画面 | `/order/:id` | 注文の詳細情報表示 |
| 管理画面 - 商品管理 | `/bo/item` | 商品情報の管理（価格、在庫、公開状態） |
| 管理画面 - 注文管理 | `/bo/order` | 注文一覧と状態管理 |

---

## 画面詳細

### 1. TOP画面（/）

**目的**: サイトのトップページ、おすすめ商品の表示

**主要要素**:
- **ヘッダー**:
  - サイト名（左上）
  - カートアイコン（右上、数量バッジ付き）
- **バナーエリア**:
  - キャッチコピー（「AI がおすすめする商品」）
  - サブコピー
- **おすすめ商品セクション**:
  - 3件の商品をカード形式で表示
  - 「すべて見る」リンク
- **フッター**:
  - 管理画面へのリンク

**機能**:
- おすすめ商品をカード形式で表示
  - 商品画像
  - 商品名
  - 価格
  - 在庫状態バッジ
- 商品カードクリックで商品詳細へ遷移（`/item/:id`）
- 「すべて見る」で商品一覧へ遷移（`/item`）
- カートアイコンに数量バッジ表示（カート内の総数量）
- カートアイコンクリックでカート画面へ遷移（`/order/cart`）

**おすすめ商品の選定ロジック**:
- Phase 1: 最初の3件を表示（暫定実装）
- Phase 2以降: AIレコメンデーション実装予定

**UI要素**:
```
┌─────────────────────────────────────┐
│ [AI EC] 　　　　　　　　  🛒 [3]   │ ← ヘッダー
├─────────────────────────────────────┤
│                                     │
│   AIがおすすめする商品              │ ← バナー
│   あなたにぴったりの商品を見つけよう │
│                                     │
├─────────────────────────────────────┤
│ おすすめ商品                         │
│                                     │
│ ┌─────┐ ┌─────┐ ┌─────┐           │
│ │[画像]│ │[画像]│ │[画像]│           │
│ │商品名│ │商品名│ │商品名│           │ ← 商品カード × 3
│ │¥999 │ │¥999 │ │¥999 │           │
│ │[状態]│ │[状態]│ │[状態]│           │
│ └─────┘ └─────┘ └─────┘           │
│                                     │
│                   [すべて見る →]    │
├─────────────────────────────────────┤
│ © 2025 AI EC | 管理画面             │ ← フッター
└─────────────────────────────────────┘
```

**参照**:
- 業務要件: [requirements.md](../requirements.md) - 商品閲覧機能

---

### 2. 商品一覧画面（/item）

**目的**: 全商品の一覧表示

**主要要素**:
- ヘッダー（TOP画面と同じ）
- 商品一覧（グリッドレイアウト）
- フッター（TOP画面と同じ）

**機能**:
- 公開されている商品のみを表示（`isPublished = true`）
- 各商品カードに以下を表示:
  - 商品画像
  - 商品名
  - 価格（¥表示、3桁区切り）
  - 商品説明
  - 在庫状態バッジ（在庫あり/残りわずか/売り切れ）
- 商品カードクリックで商品詳細へ遷移（`/item/:id`）

**レイアウト**:
- グリッドレイアウト（レスポンシブ）
  - PC: 3カラム
  - タブレット: 2カラム
  - モバイル: 1カラム

**UI要素**:
```
┌─────────────────────────────────────┐
│ [AI EC] 　　　　　　　　  🛒 [3]   │
├─────────────────────────────────────┤
│ 商品一覧                             │
│                                     │
│ ┌────────┐ ┌────────┐ ┌────────┐  │
│ │[画像]  │ │[画像]  │ │[画像]  │  │
│ │商品名  │ │商品名  │ │商品名  │  │
│ │¥9,999  │ │¥9,999  │ │¥9,999  │  │
│ │説明文  │ │説明文  │ │説明文  │  │
│ │[在庫状態]│ │[在庫状態]│ │[在庫状態]│  │
│ └────────┘ └────────┘ └────────┘  │
│                                     │
│ ┌────────┐ ┌────────┐ ┌────────┐  │
│ │[画像]  │ │[画像]  │ │[画像]  │  │
│ │...     │ │...     │ │...     │  │
│ └────────┘ └────────┘ └────────┘  │
├─────────────────────────────────────┤
│ © 2025 AI EC | 管理画面             │
└─────────────────────────────────────┘
```

**参照**:
- 業務要件: [requirements.md](../requirements.md) - 商品閲覧機能
- 業務要件: [requirements.md](../requirements.md) - 在庫状態のルール

---

### 3. 商品詳細画面（/item/:id）

**目的**: 個別商品の詳細情報表示とカート追加

**主要要素**:
- ヘッダー（TOP画面と同じ）
- 商品画像（大）
- 商品情報:
  - 商品名
  - 価格
  - 在庫状態バッジ
  - 商品説明
- カート追加ボタン
- フッター（TOP画面と同じ）

**機能**:
- 商品の詳細情報を表示
- 在庫状態に応じたバッジ表示
- 「カートに追加」ボタン:
  - 在庫がある場合（`stock > 0`）: カートに追加して `/order/cart` へ遷移
  - 売り切れの場合（`stock = 0`）: ボタンを無効化（グレーアウト）
- 非公開商品（`isPublished = false`）の場合: 404エラー表示

**UI要素**:
```
┌─────────────────────────────────────┐
│ [AI EC] 　　　　　　　　  🛒 [3]   │
├─────────────────────────────────────┤
│ ┌────────────┐                      │
│ │            │  商品名               │
│ │  商品画像  │                      │
│ │  (大)      │  ¥9,999               │
│ │            │                      │
│ └────────────┘  [在庫あり]          │
│                                     │
│                 商品の詳細な説明文が │
│                 ここに表示されます。 │
│                                     │
│                 [カートに追加]       │
│                                     │
├─────────────────────────────────────┤
│ © 2025 AI EC | 管理画面             │
└─────────────────────────────────────┘
```

**参照**:
- 業務要件: [requirements.md](../requirements.md) - 商品閲覧機能
- 業務要件: [requirements.md](../requirements.md) - カート機能

---

### 4. カート画面（/order/cart）

**目的**: カート内容の確認と編集

**主要要素**:
- ヘッダー（TOP画面と同じ）
- カート商品一覧
- 注文サマリー:
  - 小計
  - 配送料（Phase 1: ¥0）
  - 合計
- アクションボタン:
  - 「レジに進む」
  - 「買い物を続ける」
- フッター（TOP画面と同じ）

**機能**:
- カート内の商品一覧を表示:
  - 商品画像（小）
  - 商品名
  - 商品説明（簡略）
  - 単価
  - 数量（編集可能）
  - 小計（単価 × 数量）
- 数量変更機能:
  - `-` ボタン: 数量を 1 減らす（最小 0）
  - `+` ボタン: 数量を 1 増やす（最大: 在庫数）
  - 数値入力欄: 直接入力可能
  - 数量を 0 にすると自動削除
- 商品削除機能:
  - ゴミ箱アイコンクリックで即座に削除
- 合計金額のリアルタイム計算:
  - 数量変更・削除時に自動再計算
- 「レジに進む」ボタン:
  - `/order/reg` へ遷移
- 「買い物を続ける」リンク:
  - `/item` へ遷移
- カートが空の場合:
  - 「カートは空です」メッセージ表示
  - 商品一覧へのリンク表示
  - 注文サマリー・ボタンは非表示

**UI要素**:
```
┌─────────────────────────────────────┐
│ [AI EC] 　　　　　　　　  🛒 [3]   │
├─────────────────────────────────────┤
│ カート                               │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ [画像] 商品名           単価 数量 │ │
│ │        説明文         ¥9,999  [3]│ │
│ │                       小計 ¥29,997│ │
│ │                       [-] [+] [🗑]│ │
│ ├─────────────────────────────────┤ │
│ │ [画像] 商品名2          単価 数量 │ │
│ │        説明文         ¥4,999  [1]│ │
│ │                       小計 ¥4,999│ │
│ │                       [-] [+] [🗑]│ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 注文サマリー                     │ │
│ │ 小計　　　　　　　　　　¥34,996 │ │
│ │ 配送料　　　　　　　　　　　 ¥0 │ │
│ │ 合計　　　　　　　　　　¥34,996 │ │
│ └─────────────────────────────────┘ │
│                                     │
│            [レジに進む]              │
│          < 買い物を続ける            │
├─────────────────────────────────────┤
│ © 2025 AI EC | 管理画面             │
└─────────────────────────────────────┘
```

**参照**:
- 業務要件: [requirements.md](../requirements.md) - カート機能
- 詳細仕様: [specs/product.md](../specs/product.md) - 価格計算

---

### 5. 注文確認画面（/order/reg）

**目的**: 注文内容の最終確認

**主要要素**:
- ヘッダー（TOP画面と同じ）
- 注文商品一覧（確認のみ、編集不可）
- お支払い金額:
  - 小計
  - 配送料（Phase 1: ¥0）
  - 手数料（Phase 1: ¥0）
  - 合計
- アクションボタン:
  - 「注文を確定する」
  - 「カートに戻る」
- フッター（TOP画面と同じ）

**機能**:
- カート内容を確認用に表示（数量変更不可）
- 合計金額の表示
- 「注文を確定する」ボタン:
  - 注文番号を生成（`ORD-YYYYMMDD-XXX` 形式）
  - 注文を作成（`status: PENDING`）
  - 在庫引当（仮引当 → 本引当）
  - カートをクリア
  - 注文情報を持って `/order/complete` へ遷移
- 「カートに戻る」リンク:
  - `/order/cart` へ遷移
- カートが空の場合:
  - エラーメッセージ表示
  - 商品一覧へのリンク表示

**UI要素**:
```
┌─────────────────────────────────────┐
│ [AI EC] 　　　　　　　　  🛒 [0]   │
├─────────────────────────────────────┤
│ 注文確認                             │
│                                     │
│ ご注文内容をご確認ください           │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ [画像] 商品名                    │ │
│ │        ¥9,999 × 3 = ¥29,997     │ │
│ ├─────────────────────────────────┤ │
│ │ [画像] 商品名2                   │ │
│ │        ¥4,999 × 1 = ¥4,999      │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ お支払い金額                     │ │
│ │ 小計　　　　　　　　　　¥34,996 │ │
│ │ 配送料　　　　　　　　　　　 ¥0 │ │
│ │ 手数料　　　　　　　　　　　 ¥0 │ │
│ │ 合計　　　　　　　　　　¥34,996 │ │
│ └─────────────────────────────────┘ │
│                                     │
│          [注文を確定する]            │
│          < カートに戻る              │
├─────────────────────────────────────┤
│ © 2025 AI EC | 管理画面             │
└─────────────────────────────────────┘
```

**参照**:
- 業務要件: [requirements.md](../requirements.md) - 注文機能
- 詳細仕様: [specs/order.md](../specs/order.md) - 注文フロー

---

### 6. 注文完了画面（/order/complete）

**目的**: 注文完了の通知

**主要要素**:
- ヘッダー（TOP画面と同じ）
- 完了メッセージ（✓ チェックマークアイコン）
- 注文番号
- 注文内容サマリー:
  - 注文した商品一覧
  - 合計金額
- お知らせ:
  - メール送信の案内（Phase 2以降）
  - 発送通知の案内（Phase 2以降）
- アクションボタン:
  - 「TOPに戻る」
  - 「買い物を続ける」
- フッター（TOP画面と同じ）

**機能**:
- 注文完了メッセージを表示
- 注文番号を強調表示
- 注文した商品の一覧と合計金額を表示
- 「TOPに戻る」ボタン:
  - `/` へ遷移
- 「買い物を続ける」ボタン:
  - `/item` へ遷移
- 直接URLアクセス時（注文情報がない場合）:
  - エラーメッセージ表示
  - TOPへのリンク表示

**UI要素**:
```
┌─────────────────────────────────────┐
│ [AI EC] 　　　　　　　　  🛒 [0]   │
├─────────────────────────────────────┤
│              ✓                      │
│                                     │
│        ご注文ありがとうございます     │
│                                     │
│    注文番号: ORD-20250210-001       │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ ご注文内容                       │ │
│ │ 商品名 × 3               ¥29,997│ │
│ │ 商品名2 × 1              ¥4,999 │ │
│ │                                 │ │
│ │ 合計金額              ¥34,996   │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ご注文確認メールを送信しました       │
│ 発送完了次第、メールにてお知らせします │
│                                     │
│          [TOPに戻る]                │
│         [買い物を続ける]             │
├─────────────────────────────────────┤
│ © 2025 AI EC | 管理画面             │
└─────────────────────────────────────┘
```

**参照**:
- 業務要件: [requirements.md](../requirements.md) - 注文機能
- 詳細仕様: [specs/order.md](../specs/order.md) - 注文完了

---

### 7. 注文詳細画面（/order/:id）

**目的**: 注文の詳細情報表示

**主要要素**:
- ヘッダー（TOP画面と同じ）
- 注文情報:
  - 注文番号
  - 注文日時
  - 注文状態バッジ
- 注文商品一覧
- お支払い金額
- キャンセルボタン（状態によって表示/非表示）
- フッター（TOP画面と同じ）

**機能**:
- 注文の詳細情報を表示
- 注文状態をバッジで表示:
  - PENDING: 黄色
  - CONFIRMED: 青色
  - SHIPPED: 緑色
  - DELIVERED: 緑色
  - CANCELLED: グレー
- 「注文をキャンセル」ボタン:
  - PENDING/CONFIRMED の場合のみ表示
  - クリックで確認ダイアログ表示
  - キャンセル実行後、状態を CANCELLED に変更
  - 在庫を戻す（本引当を解除）
- SHIPPED/DELIVERED/CANCELLED の場合:
  - キャンセルボタンは非表示

**UI要素**:
```
┌─────────────────────────────────────┐
│ [AI EC] 　　　　　　　　  🛒 [3]   │
├─────────────────────────────────────┤
│ 注文詳細                             │
│                                     │
│ 注文番号: ORD-20250210-001          │
│ 注文日時: 2025-02-10 14:30          │
│ 状態: [作成済み]                     │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ 注文内容                         │ │
│ │ [画像] 商品名                    │ │
│ │        ¥9,999 × 3 = ¥29,997     │ │
│ ├─────────────────────────────────┤ │
│ │ [画像] 商品名2                   │ │
│ │        ¥4,999 × 1 = ¥4,999      │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ お支払い金額                     │ │
│ │ 小計　　　　　　　　　　¥34,996 │ │
│ │ 配送料　　　　　　　　　　　 ¥0 │ │
│ │ 合計　　　　　　　　　　¥34,996 │ │
│ └─────────────────────────────────┘ │
│                                     │
│          [注文をキャンセル]          │
│                                     │
├─────────────────────────────────────┤
│ © 2025 AI EC | 管理画面             │
└─────────────────────────────────────┘
```

**参照**:
- 業務要件: [requirements.md](../requirements.md) - 注文の状態遷移
- 詳細仕様: [specs/order.md](../specs/order.md) - 注文キャンセル

---

### 8. 管理画面 - 商品管理（/bo/item）

**目的**: 商品情報の管理（価格、在庫、公開状態）

**主要要素**:
- ヘッダー（管理画面専用）
- 商品管理テーブル
- 保存ボタン
- フッター

**機能**:
- 全商品をテーブル形式で表示（公開・非公開問わず）
- 各商品の編集機能:
  - 価格: 数値入力欄
  - 在庫数: 数値入力欄
  - 公開/非公開: トグルスイッチ
- 「保存」ボタン:
  - 変更がない場合はボタンを無効化
  - 保存成功時に成功メッセージ表示
- 非公開にした商品は商品一覧（`/item`）に表示されない

**UI要素**:
```
┌─────────────────────────────────────┐
│ [管理画面] 商品管理                  │
├─────────────────────────────────────┤
│ 商品管理                             │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │ ID | 商品名 | 価格 | 在庫 | 公開 │ │
│ ├─────────────────────────────────┤ │
│ │ 1  | 商品A | [   ] | [  ] | ○  │ │
│ │ 2  | 商品B | [   ] | [  ] | ×  │ │
│ │ 3  | 商品C | [   ] | [  ] | ○  │ │
│ │ ...                             │ │
│ └─────────────────────────────────┘ │
│                                     │
│                      [保存]          │
│                                     │
├─────────────────────────────────────┤
│ © 2025 AI EC | 商品管理 | 注文管理   │
└─────────────────────────────────────┘
```

**参照**:
- 業務要件: [requirements.md](../requirements.md) - 商品管理機能
- 詳細仕様: [admin-ui.md](./admin-ui.md) - 管理画面

---

### 9. 管理画面 - 注文管理（/bo/order）

**目的**: 注文一覧と状態管理

**主要要素**:
- ヘッダー（管理画面専用）
- 注文一覧テーブル
- フッター

**機能**:
- 全注文をテーブル形式で表示
- 各注文の情報:
  - 注文番号
  - 注文日時
  - 状態バッジ
  - 合計金額
  - アクションボタン（状態に応じて変化）
- 状態遷移ボタン:
  - PENDING → 「確認」ボタン（CONFIRMED へ）
  - CONFIRMED → 「発送」ボタン（SHIPPED へ）
  - SHIPPED → 「配達完了」ボタン（DELIVERED へ）
- 注文番号クリックで注文詳細画面へ遷移

**UI要素**:
```
┌─────────────────────────────────────┐
│ [管理画面] 注文管理                  │
├─────────────────────────────────────┤
│ 注文管理                             │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │注文番号 | 日時 | 状態 | 金額 | 操作│ │
│ ├─────────────────────────────────┤ │
│ │ORD-001 | 2/10 |[作成]|¥9,999|確認││ │
│ │ORD-002 | 2/10 |[確認]|¥4,999|発送││ │
│ │ORD-003 | 2/09 |[発送]|¥1,999|完了││ │
│ │ ...                             │ │
│ └─────────────────────────────────┘ │
│                                     │
├─────────────────────────────────────┤
│ © 2025 AI EC | 商品管理 | 注文管理   │
└─────────────────────────────────────┘
```

**参照**:
- 業務要件: [requirements.md](../requirements.md) - 注文の状態遷移
- 詳細仕様: [admin-ui.md](./admin-ui.md) - 管理画面

---

## 画面遷移図

### 顧客向け画面遷移

```
                    [TOP画面 /]
                         │
        ┌────────────────┼────────────────┐
        │                │                │
   商品カード      「すべて見る」    カートアイコン
   クリック            クリック          クリック
        │                │                │
        ▼                ▼                ▼
[商品詳細        [商品一覧         [カート
 /item/:id]       /item]           /order/cart]
        │                │                │
  「カートに追加」  商品カード      「レジに進む」
        │           クリック              │
        └────────────┼───────────────────┘
                     ▼
              [注文確認
               /order/reg]
                     │
             「注文を確定する」
                     ▼
              [注文完了         ─────→  [注文詳細
               /order/complete]          /order/:id]
                     │                        │
        ┌────────────┼────────────┐   「キャンセル」
        │                         │           │
   「TOPに戻る」         「買い物を続ける」    │
        │                         │           │
        ▼                         ▼           ▼
    [TOP画面]                [商品一覧]   [注文詳細
                                          (CANCELLED)]
```

### 管理画面遷移

```
    [フッター「管理画面」リンク]
               │
               ▼
        [管理画面 - 商品管理
         /bo/item]
               │
        「注文管理」タブ
               │
               ▼
        [管理画面 - 注文管理
         /bo/order]
               │
        注文番号クリック
               │
               ▼
        [注文詳細
         /order/:id]
```

---

## UI/UX設計思想

### デザインシステム

#### カラーパレット
- **プライマリカラー**: 青系（`bg-blue-600`）
- **セカンダリカラー**: グレー系（`bg-gray-100`, `bg-gray-200`）
- **アクセントカラー**: 緑系（成功）、赤系（エラー）、黄色系（警告）
- **在庫状態バッジ**:
  - 在庫あり: 緑（`bg-green-500`）
  - 残りわずか: オレンジ（`bg-orange-500`）
  - 売り切れ: グレー（`bg-gray-400`）

#### タイポグラフィ
- **見出し**: `text-2xl`, `text-3xl`, `font-bold`
- **本文**: `text-base`, `text-gray-700`
- **価格表示**: `text-xl`, `font-semibold`, `text-gray-900`

#### スペーシング
- **セクション間**: `mb-8`, `mb-12`
- **要素間**: `mb-4`, `mb-6`
- **パディング**: `p-4`, `p-6`, `p-8`

### レスポンシブデザイン

- **ブレークポイント** (Tailwind CSS):
  - モバイル: デフォルト（< 640px）
  - タブレット: `sm:` (≥ 640px)
  - PC: `md:` (≥ 768px), `lg:` (≥ 1024px)

- **グリッドレイアウト**:
  - モバイル: 1カラム
  - タブレット: 2カラム（`sm:grid-cols-2`）
  - PC: 3カラム（`md:grid-cols-3`）

### アクセシビリティ

- **キーボード操作**:
  - すべてのボタン・リンクはキーボードでフォーカス可能
  - `Tab` キーで順次フォーカス移動

- **スクリーンリーダー対応**:
  - セマンティックHTML使用（`<nav>`, `<main>`, `<section>`）
  - `aria-label` でアイコンボタンに説明を付与

- **カラーコントラスト**:
  - WCAG 2.1 AA基準を満たすコントラスト比

### インタラクションパターン

#### ローディング状態
- データ取得中: スピナー表示
- ボタンクリック後: ボタンを無効化してスピナー表示

#### エラー表示
- フォーム検証エラー: 入力欄の下に赤文字でメッセージ表示
- API エラー: 画面上部にトーストメッセージ表示

#### 成功フィードバック
- 保存成功: 緑色のトーストメッセージ表示
- カート追加: カートアイコンのバッジ数が増加

---

## 関連資料

- **技術仕様**: [SPEC.md](../SPEC.md) - ルーティング・コンポーネント設計
- **業務要件**: [requirements.md](../requirements.md) - ビジネスルール
- **データモデル**: [data-model.md](../data-model.md) - エンティティ定義
- **API仕様**: [api-spec.md](./api-spec.md) - APIエンドポイント
- **詳細仕様**: [admin-ui.md](./admin-ui.md) - 管理画面
